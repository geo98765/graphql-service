# =====================================================
# APPLICATION NAME
# =====================================================
spring.application.name=graphql-profile-service

# =====================================================
# SERVER CONFIGURATION
# =====================================================
# Puerto din치mico para Render
server.port=${PORT:8084}

# =====================================================
# DATABASE CONFIGURATION - BASE DE DATOS INDEPENDIENTE (NEON)
# =====================================================
# Usa su PROPIA base de datos independiente de user-service en Neon
# graphql-profile-service maneja: profiles, user_preferences, favorite_artists, favorite_genres, music_genres
spring.datasource.url=${DATABASE_URL:jdbc:postgresql://localhost:5432/rockstadium_preferences}
spring.datasource.username=${DB_USERNAME:Administrador}
spring.datasource.password=${DB_PASSWORD:1234}

# =====================================================
# JPA CONFIGURATION
# =====================================================
# IMPORTANTE: Usar 'update' para crear/actualizar tablas autom치ticamente
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.format_sql=true
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect

# =====================================================
# HIKARICP CONFIGURATION
# =====================================================
spring.datasource.hikari.maximum-pool-size=5
spring.datasource.hikari.minimum-idle=1
spring.datasource.hikari.connection-timeout=20000
spring.datasource.hikari.idle-timeout=300000
spring.datasource.hikari.max-lifetime=600000

# =====================================================
# GRAPHQL CONFIGURATION
# =====================================================
# Habilitar GraphiQL UI para testing
spring.graphql.graphiql.enabled=true
spring.graphql.graphiql.path=/graphiql

# Endpoint de GraphQL
spring.graphql.path=/graphql

# Schema printer
spring.graphql.schema.printer.enabled=true

# CORS para GraphQL
spring.graphql.cors.allowed-origins=*
spring.graphql.cors.allowed-methods=GET,POST,OPTIONS

# =====================================================
# SPOTIFY API CONFIGURATION (variables de entorno)
# =====================================================
spotify.client.id=${SPOTIFY_CLIENT_ID:dc0ed499d26d41dabe9f189393a4a515}
spotify.client.secret=${SPOTIFY_CLIENT_SECRET:3acb1b25f2764bd4a9cbee6c8ec67b0a}

# =====================================================
# EUREKA CLIENT CONFIGURATION (URL din치mica)
# =====================================================
eureka.instance.prefer-ip-address=true
eureka.client.fetch-registry=true
eureka.client.register-with-eureka=true
eureka.client.service-url.defaultZone=${EUREKA_SERVER_URL:http://localhost:8761/eureka}
eureka.instance.hostname=${PROFILE_SERVICE_HOSTNAME:localhost}

# =====================================================
# ACTUATOR
# =====================================================
management.endpoints.web.exposure.include=health,info,metrics
management.endpoint.health.show-details=always

# =====================================================
# LOGGING
# =====================================================
logging.level.com.example.graphql_profile_service=INFO
logging.level.org.springframework.graphql=DEBUG
logging.level.graphql=DEBUG

# =====================================================
# USER-SERVICE REST CLIENT
# =====================================================
# URL del user-service para comunicaci칩n interna (puede ser URL de Render)
user-service.url=${USER_SERVICE_URL:http://user-service}